@echo off
:: DOSBox compatible new MAKEFILE.INC util
::  Used by NEWMOD.BAT
::
::  BHZ Skeleton Module for MBBS v6.x
::  Mark Seelye (bhz) 2023
::  burninghorizon.com, bhz.co

:: 7 required args
:: dev id, mod id, modmain, drive, bbs dir, src dir, and file
IF "%7"=="" goto usage
set _devid=%1
set _modid=%2
set _modmain=%3
set _dr=%4
set _bbs=%5
set _srcdir=%6
set _file=%7

:: Make the MAKEFILE.INC file
@echo # Autogenerated by NEWINC.BAT > %_file%
@echo DEVID=%_devid%> %_file%
@echo MODID=%_modid%>> %_file%
@echo MODNAM=$(DEVID)$(MODID)>> %_file%
@echo MODMAIN=%_modmain%>> %_file%
@echo BBSDR=%_dr%>> %_file%
@echo BBS=$(BBSDR)\%_bbs%>> %_file%
@echo PHARINC=$(BBSDR)\RUN286\INC>> %_file%
@echo PHARLIB=$(BBSDR)\RUN286\BC3\LIB>> %_file%
@echo BBSSRC=$(BBS)\%_srcdir%>> %_file%
@echo MODSRCDR=$(BBSDR)>> %_file%
@echo MODSRC=$(BBSSRC)\$(DEVID)\$(MODID)>> %_file%

goto end

:usage
echo.
echo Create new MAKEFILE.INC (DOSBox compatible) v0.1
echo   (used by NEWMOD.BAT)
echo.
echo  BHZ Skeleton Module for MBBS v6.x
echo  Mark Seelye (bhz) 2023
echo  burninghorizon.com, bhz.co
echo.
echo USAGE:
echo   NEWINC.BAT DEVID MODID MODMAIN DRIVE BBSDIR SRCDIR FILE
echo     DEVID is your desired dev id.  Ex: ABC (3 characters)
echo     MODID is your desired module id.  Ex: BLURP (1-5 characters)
echo     MODMAIN name of your "main" C/H file (without extenstions)  Ex: MYMOD
echo     DRIVE drive with bbs source.  Ex: C: (Letter and colon only, D: E: etc.)
echo     BBSDIR directory without drive letter with bbs.  Ex: BBSV6
echo     SRCDIR directory in BBSDIR with source.  Ex: SRC
echo     FILE is the path/filename for output inc file. 
echo       Ex: c:\bbsv6\SRC\FOO\BARRR\MAKEFILE.INC
echo     Notes:
echo       For best effect enter DEVID, MODID, MODMAIN in ALL CAPS
echo.
echo     Examples: 
echo       NEWINC.BAT BHZ BLURP MYMOD C: bbsv6 src c:\newsrc\MAKEFILE.INC
echo          Creates new makefile include file at C:\newsrc\MAKEFILE.INC
echo.

goto end

:end
